<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>扭蛋机</title>
	<script src="jquery.min.js"></script>
	<!-- <script>
		//判断访问终端
		var browser = {
			versions: function () {
				var u = navigator.userAgent,
				app = navigator.appVersion;
				return {
                    trident: u.indexOf('Trident') > -1, //IE内核
                    presto: u.indexOf('Presto') > -1, //opera内核
                    webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                    gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,//火狐内核
                    mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
                    ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                    android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1, //android终端
                    iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器
                    iPad: u.indexOf('iPad') > -1, //是否iPad
                    webApp: u.indexOf('Safari') == -1, //是否web应该程序，没有头部与底部
                    weixin: u.indexOf('MicroMessenger') > -1, //是否微信 （2015-01-22新增）
                    qq: u.match(/\sQQ/i) == " qq" //是否QQ
                };
            }(),
            language: (navigator.browserLanguage || navigator.language).toLowerCase()
        }
        function is_weixin() {
        	var ua = navigator.userAgent.toLowerCase();
        	if (ua.match(/MicroMessenger/i) == "micromessenger") {
        		return true;
        	} else {
        		return false;
        	}
        }
        $(document).ready(function(){

        	var isWeixin = is_weixin();
        	var winHeight = typeof window.innerHeight != 'undefined' ? window.innerHeight : document.documentElement.clientHeight;
        	var weixinTip = $('<div id="weixinTip" style="z-index: 10000;position: absolute;top:0;left:0;background-color: #FFF;height:'+$(window).height()+'px;filter:alpha(opacity=90);-moz-opacity:0.90; opacity:0.90;"><p><img src="'+((isPIA() == 1)?"./images/ios_wx.jpg":"./images/android_wx.jpg")+'" alt=""/></p></div>');

        	

        	$("#all").click(function(){
        		
        		if(isWeixin){
        			$("body").append(weixinTip);
        		}
        		
        		if (browser.versions.iPhone || browser.versions.iPad || browser.versions.ios) {
        			window.location.href='https://itunes.apple.com/cn/app/id1279822210?mt=8';
        		}else if (browser.versions.android) {
        			window.location.href='http://down2.anfu777.com/apk2/2030019.apk';
        		}else{
        			var isok = confirm("是否用电脑下载app？");
        			if(isok){
        				window.open('http://down2.anfu777.com/apk2/2030019.apk');
        			}else{
        				return;
        			}
        		}
        		
        		
        		
        	});
        });

		//js判断终端是安卓还是苹果
		function isPIA(){
			var u = navigator.userAgent, app = navigator.appVersion;
			var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
			var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
			if(isiOS) {return 1;}
			if(isAndroid) {return 2};
		}

	</script> -->
	<script>
		var mobile_bs = {
			versions: function() {
				var u = navigator.userAgent;
				return {
			   trident: u.indexOf('Trident') > -1, //IE内核
			   presto: u.indexOf('Presto') > -1, //opera内核
			   webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
			   gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
			   mobile: !! u.match(/AppleWebKit.*Mobile.*/) || !! u.match(/AppleWebKit/) && u.indexOf('QIHU') && u.indexOf('QIHU') > -1 && u.indexOf('Chrome') < 0, //是否为移动终端
			   ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
			   android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
			   iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
			   iPad: u.indexOf('iPad') > -1,  //是否iPad
			   webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
				}
			} ()
		};
		if (mobile_bs.versions.mobile) {
			if (mobile_bs.versions.android || mobile_bs.versions.iPhone || mobile_bs.versions.iPad || mobile_bs.versions.ios) {
				var scale=1/window.devicePixelRatio;
				document.write("<meta name='viewport' content='user-scalable=no,width=device-width,initial-scale="+scale+",maximum-scale="+scale+", minimum-scale="+scale+"'>");
				var html=document.getElementsByTagName("html")[0];
				html.style.fontSize=parseFloat(document.documentElement.clientWidth/16)+"px";
			}
		}else{
			var html=document.getElementsByTagName("html")[0];
			html.style.fontSize="40px";
		}; 

	</script>
	<style>
		html::-webkit-scrollbar{width: 0;}
		*{margin:0;padding:0;list-style:none;font-family:"Microsoft Yahei";}
		.wrap{overflow:auto;position: absolute;left:0;top:0;width: 16rem;min-height: 100%;background-color:#DA852A;}
		.area{width: 16rem;height:19.7rem;background:url(img/n16.jpg) no-repeat;background-size: cover;position: relative;overflow:hidden;}
		.showprize{width: 16rem;height:15.7rem;background:url(img/n17.jpg) no-repeat;background-size: cover;margin-top:-2px;position: relative;overflow:hidden;}
		.area .slogan{width: 8.3rem;height:0.775rem;background:url(img/n18.png) no-repeat;background-size: cover;position: absolute;left:50%;margin-left:-4.15rem;top:4.2rem;}
		.area>p{text-align: center;font-size:0.6rem;color:yellow;margin-top:5.1rem;}
		.area>p span{color:white;}
		.broadcast{width: 100%;height:1rem;text-align: center;margin-top:1.45rem;font-size:0.6rem;color:white;line-height: 1rem;overflow:hidden;}
		/*主要操作区---ball--jump*/
		.jump{width: 9.5rem;height:5rem;margin:1.3rem auto 0;position: relative;}
		.jump .ball{width: 2.125rem;height: 2.125rem;position: absolute;left:0;top:calc(100% - 2.125rem);background:url(img/n4.png) no-repeat;background-size: cover;-webkit-animation:7s rot infinite linear;z-index: 1;}
		.jump .ball:nth-of-type(2){background:url(img/n5.png) no-repeat;background-size: cover;}
		.jump .ball:nth-of-type(3){background:url(img/n6.png) no-repeat;background-size: cover;}
		.jump .ball:nth-of-type(4){background:url(img/n7.png) no-repeat;background-size: cover;}
		.jump .ball:nth-of-type(5){background:url(img/n8.png) no-repeat;background-size: cover;}
		.jump .ball:nth-of-type(6){background:url(img/n4.png) no-repeat;background-size: cover;}
		.jump .ball:nth-of-type(7){background:url(img/n7.png) no-repeat;background-size: cover;}
		@-webkit-keyframes rot{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
		.jump .model{width: 2.125rem;height: 2.125rem;position: absolute;left:0;bottom:0;}
		.mirror{width: 9.5rem;height:5rem;position: absolute;left:50%;margin-left:-4.75rem;top:9.65rem;background:url(img/n1.png) no-repeat;background-size: cover;}
		.exit{width: 3.25rem;height:2.5rem;position: absolute;left:50%;margin-left:-1.625rem;top:12.95rem;background:url(img/n9.png) no-repeat;background-size: cover;z-index:3;}
		.exitt{background:url(img/n19.png) no-repeat;background-size: cover;}

		.z-begin{width: 4.4rem;height:2.075rem;position: absolute;top:15.3rem;-webkit-animation:breathe 3s infinite;transform-origin:center bottom;}
		.z-begin:nth-child(7){left:2.9rem;background:url(img/n2.png) no-repeat;background-size: cover;}
		.z-begin:nth-child(8){left:8.8rem;background:url(img/n3.png) no-repeat;background-size: cover;}
		@-webkit-keyframes breathe{0%,100%{transform:scaleY(1);}50%{transform:scaleY(1.1);}}
		.hue{-webkit-filter:hue-rotate(260deg);}
		.money{color:white;font-size:0.61rem;margin:3rem 0 0;line-height:1rem;text-align: center;}

		.gun-ball{width: 2.125rem;height: 2.125rem;position: absolute;left:44%;top:52%;background:url(img/n4.png) no-repeat;background-size: cover;-webkit-animation:7s rot infinite linear;z-index: 0;display:none;}
		/*.gun-ball-active{background:url(img/n7.png) no-repeat;background-size: cover;}*/

		.bag{display:block;width: 5.475rem;height:2.65rem;margin-top:0.6rem;margin-left:9.7rem;background:url(img/n10.png) no-repeat;background-size: cover;}
		.showprize ul{width: 14.5rem;height:11.5rem;margin:0.3rem auto 0;box-sizing: border-box;padding:0.7rem 1.125rem 0;}
		.showprize ul li{float:left;width:5.325rem;}
		.showprize ul li:nth-of-type(2n){float:right;}
		.showprize ul li div{width:5.325rem;height:3.75rem;background:url(img/n15.png) no-repeat;background-size: cover;overflow:hidden;}
		.showprize ul li div img{width:3.775rem;height:2.9rem;display:block;margin:0.3rem auto;}
		.showprize ul li p{color:#FCC00D;font-size:0.6rem;text-align: center;margin:0.1rem 0 0.5rem;}

		/*中奖后*/
		#zj_contain{position: absolute;width: 100%;height: 100%;background-color:rgba(0,0,0,.8);z-index: 100;top:0;left:0;
		}
		#close_btn{position: absolute;top:8%;right: 7%;height: 4.6%;width: 10.3%;background: url(img/close.png) no-repeat;background-size:100% 100%;z-index: 103;
		}
		.coupon-modal-showPrize-dialog {-webkit-animation-name: showCoupon;animation-name: showCoupon;-webkit-animation-duration: .5s;animation-duration: .5s;-webkit-animation-fill-mode: both;animation-fill-mode: both;
		}
		.coupon-modal-showPrize-dialog{position:absolute;width: 96%;height: 21rem;left: 2%;top: 8.5%;background-image: url(img/couponBg.png);background-repeat: no-repeat;background-size: 100%;z-index: 101;
		}
		.decorate1,.decorate2,.decorate3,.decorate4,.decorate5,.decorate6{background-repeat: no-repeat;background-size: 100%;position: absolute;-webkit-animation-name: showDecorate;animation-name: showDecorate;-webkit-animation-duration: .5s;animation-duration: .5s;-webkit-animation-delay: .5s;animation-delay: .5s;-webkit-animation-fill-mode: both;animation-fill-mode: both;
		}
		.decorate1 {background-image: url(img/hua1.png);width: 84%;height: 21%;top:5%;left: 8%;z-index: 102;
		}
		.decorate2 {background-image: url(img/blue.png);width: 6.8%;height: 2.1%;top:50%;left: 10%;z-index: 102;
		}
		.decorate5 {background-image: url(img/blue.png);width: 6.8%;height: 2.1%;top:80%;left: 80%;z-index: 102;
		}
		.decorate3 {background-image: url(img/yellow.png);width: 5%;height: 4%;top:50%;left: 90%;z-index: 102;
		}
		.decorate6 {background-image: url(img/yellow.png);width: 5%;height: 4%;top:30%;left: 50%;z-index: 102;
		}
		.decorate4 {background-image: url(img/d5.png);width: 100%;height: 48%;top: 0;left: 0;
		}
		#zj_main{width: 100%;height: 50%;position: absolute;top:8rem;z-index: 103;
		}
		#zj_main h2{display: block;position: absolute;left:25%;text-align: center;font-size:0.5rem;width: 50%;height:8%;line-height:8% ;color:white;
		}
		#zj_imgbox{position: absolute;left:20%;width: 60%;height: 50%;top: 10%;
		}
		#zj_imgbox img{width: 100%;height: 100%;display:block;
		}
		#zj_btn{position: absolute;left:20%;width: 58%;height: 18%;top: 75%;border: none;background: white;background: url(img/btnBg.png) no-repeat;background-size:100% ;font-size: 0.8rem;font-family: "Microsoft Yahei";padding-bottom: 3%;
		}
		@keyframes showCoupon{from{transform: scale(.2,.2);}to{transform: scale(1,1);}
		}
		@keyframes showDecorate{from{opacity: 0;}to{opacity: 1;}
		}
	</style>
</head>
<body>
	<div class="wrap">
		<div class="area">
			<div class="slogan"></div>
			<p>已有 <span class="people-num">238261</span> 人参与</p>
			<div class="broadcast">
				<ul>
					<li>恭喜 Adonis 获得20扭蛋币！</li>
					<li>恭喜 Darren 获得50扭蛋币！</li>
					<li>恭喜 Joyce 获得80扭蛋币！</li>
					<li>恭喜 Jerry 获得100扭蛋币！</li>
					<li>恭喜 Porter 获得20扭蛋币！</li>
					<li>恭喜 Taylor 获得40扭蛋币！</li>
					<li>恭喜 York 获得100扭蛋币！</li>
				</ul>
			</div>
			<div class="jump">
				<div class="ball"></div>
				<div class="ball"></div>
				<div class="ball"></div>
				<div class="ball"></div>
				<div class="ball"></div>
				<div class="ball"></div>
				<div class="ball"></div>
				<div class="model"></div>
			</div>
			<div class="mirror"></div>
			<div class="exit"></div>
			<div class="z-begin"></div>
			<div class="z-begin"></div>
			<div class="money" id="z-num">还有<span>10</span>枚扭蛋币，可扭蛋<span>5</span>次</div>
			<div class="gun-ball"></div>
		</div>
		<div class="showprize">
			<a href="prizeku.html" class="bag"></a>
			<ul>
				<li>
					<div>
						<img src="img/n14.png">
					</div>
					<p>随机现金奖励</p>
				</li>
				<li>
					<div>
						<img src="img/n11.png">
					</div>
					<p>随机实物奖励</p>
				</li>
				<li>
					<div>
						<img src="img/n13.png">
					</div>
					<p>随机特殊奖励</p>
				</li>
				<li>
					<div>
						<img src="img/n12.png">
					</div>
					<p>随机安慰奖励</p>
				</li>
			</ul>
		</div>
		<div id="zj_contain" style="display:none">
			<div id="close_btn"></div>
			<div class="coupon-modal-showPrize-dialog">
				<div id="zj_main">
					<h2>你的运气真是太棒啦!!!</h2>
					<div id="zj_imgbox"><img src="img/n12.png"></div>
					<button id="zj_btn">立即领取</button>
				</div>
				<i class="decorate1"></i><i class="decorate2"></i><i class="decorate3"></i><i class="decorate5"></i></i><i class="decorate6"></i>
			</div>
			<i class="decorate4"></i>
		</div>
	</div>
	<script>
		$(function(){
			
			document.addEventListener('touchmove',function(e){
				e.stopPropagation();
			},false)
			//自动播报
			var oUl=$(".broadcast ul").get(0);
			oUl.innerHTML+=oUl.innerHTML;
			var num=0;
			var per=-1;
			setInterval(function(){
				num++;
				if(num==9){
					$(".broadcast ul").css("marginTop","-1rem");
					num=2;
				}
				$(".broadcast ul").animate({"marginTop":per*num+"rem"},450,"linear");
			},2000)
			//人头增加
			var numpeople=238261;
			setInterval(function(){
				numpeople++;
				$(".people-num").html(numpeople);
			},5000)

			/////////-------------------------------------------
			var cishu=document.getElementById("z-num").getElementsByTagName("span")[1];
			var cishubi=document.getElementById("z-num").getElementsByTagName("span")[0];
			//存时间妈蛋！！！
			// window.localStorage.removeItem("time")       
			// window.localStorage.removeItem("numm")          
			if(window.localStorage.getItem("time")){
				var str=window.localStorage.getItem("time");
				var time=str.split(",");
			}
			cishu.innerHTML=window.localStorage.getItem("numm")||5;
			cishubi.innerHTML=2*Number(cishu.innerHTML);
			var dd=parseInt(new Date().getDate());
			if(time){
				if(dd>parseInt(time[0])){
					window.localStorage.removeItem("numm");
					window.localStorage.removeItem("time");
					time=[];
					cishu.innerHTML=5;
					cishubi.innerHTML=2*Number(cishu.innerHTML);
				}	
			}
			/////////---------------------------------------------
			//-----------------小球蹦蹦蹦
			// $(".jump .ball").css("top","100px")
			var mintop=0;
			var maxtop=$(".jump .model").offset().top-$(".jump").offset().top;
			var minleft=0;
			var maxleft=$(".jump").width()-$(".jump .model").width();

			$(".jump .ball").each(function(index){
				var _left=Math.floor(Math.random()*maxleft);
				$(this).css("left",_left+"px");
				var x=$(this).get(0);
				setTimeout(function(){
					hitMove(x);
				},index*200)
			})

			function hitMove(obj){
				clearInterval(obj.timer4)
				var speedX=10;
				var speedY=-17;// speedX+=1;
				obj.timer4=setInterval(function(){
					var l=parseFloat(getStyle(obj,"left"))+speedX;
					var t=parseFloat(getStyle(obj,"top"))+speedY
					// console.log(parseFloat(getStyle(obj,"left"))+'----'+parseFloat(getStyle(obj,"top")))
					speedY+=0.3; //放在l,t之上和之下是两种效果-之上是带有摩擦力，之下是增加速度无摩擦
					speedX+=0.3;
					if(t>=maxtop){
						speedY*=-1;
						t=maxtop;
					}else if(t<=mintop){
						speedY*=-1;
						t=mintop;
					}
					if(l>=maxleft){
						speedX*=-1;
						l=maxleft;
					}else if(l<=minleft){
						speedX*=-1;
						l=minleft;
					}

					obj.style.left=l+"px";
					obj.style.top=t+"px";
				},30)
			}
			function getStyle(obj,attr) {
				return obj.currentStyle ?obj.currentStyle[attr]:getComputedStyle(obj,false)[attr];
			}
			//--------------z-begin
			var alert=document.getElementById("zj_contain");
			var close=document.getElementById("close_btn");
			var result=document.getElementById("zj_btn");
			var arrBall=[4,5,6,7,8];
			$(".z-begin").click(function(){

				///////////////////------------------------------
				if(window.localStorage.getItem("time")){
					var str=window.localStorage.getItem("time");
					var time=str.split(",");
				}else{
					var time=[];
				}
				if(time[time.length-1]>parseInt(time[0])){
					window.localStorage.removeItem("numm");
					window.localStorage.removeItem("time");
					time=[];
				}
				if(parseInt(cishu.innerHTML)<=0){
					window.alert("您的抽奖次数已用完");//抽奖次数用完后的弹出框
					return false;
				}
				var d=new Date()
				time.push(d.getDate());
				window.localStorage.setItem("time",time);

				var now=parseInt(window.localStorage.getItem("numm")||5);
				window.localStorage.setItem("numm",now-1);
				cishu.innerHTML=window.localStorage.getItem("numm");
				cishubi.innerHTML=2*Number(cishu.innerHTML);
				///////////////////----------------------------------------
				
				$(".exit").addClass("exitt");
				$(this).addClass("hue");
				var arrNum=Math.floor(Math.random()*5);
				$(".gun-ball").css({"background":"url(img/n"+arrBall[arrNum]+".png) no-repeat","background-size": "cover","display":"block"}).animate({"top":"65%"},700,"linear",function(){
					$(this).css({"zIndex":"4"}).animate({"top":"90%"},700,"linear",function(){
						alert.style.display="block";
					})
				})

			})
			close.onclick=function(){
				alert.style.display="none";
				$(".gun-ball").css({"display":"none","top":"50%","zIndex":"0"});
				$(".exit").removeClass("exitt");
				$(".z-begin").removeClass("hue");
			}
			result.onclick=function(){
				window.location.href="http://www.zoley.me";
			}
		})
	</script>

</body>
</html>
